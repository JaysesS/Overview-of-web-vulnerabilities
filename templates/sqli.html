{% extends "base.html" %}

{% block title %}SQLi{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center mt-3">
        <div class="col-8 block-center">
            {% if username == 'guest' %}
            <form class="text-center border border-light p-5" action="/sqli" method="POST">
                <p class="h4 mb-4">Sign in</p>
                {{ form.username(placeholder="Username", id="defaultLoginFormEmail", class="form-control mb-4") }}
                {{ form.password(placeholder="Password", id="defaultLoginFormPassword", class="form-control mb-4") }}
                {{ form.submit(class="btn btn-secondary btn-block my-4") }}
            </form>
            <div class="mt-3">
                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        {% for category, message in messages %}
                            <div class="alert alert-danger" role="alert">
                                {{ message }}
                            </div>
                        {% endfor %}
                    {% endif %}
                {% endwith %}
            </div>
            {% else %}
            <div class="text-center">
                <h3>Welcome to cabinet!</h3>
                <p class="text-monospace">Result of SQL: {{ result }}</p>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}